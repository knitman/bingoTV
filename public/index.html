<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>BINGO TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<style>
body{
  background:radial-gradient(circle,#ffd000,#ff7a00);
  font-family:Arial, sans-serif;
  text-align:center;
  color:#000;
  margin:0;
  padding:0 0 40px;
}

h1{ margin-top:15px; }

/* ===== ÎšÎ•ÎÎ¤Î¡Î™ÎšÎ— ÎœÎ Î‘Î›Î‘ ===== */
#number{
  width:400px;
  height:400px;
  border-radius:50%;
  background:white;
  font-size:200px;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:20px auto;
  transition: transform 0.3s ease;
  box-shadow:0 10px 40px rgba(0,0,0,0.3);
}
#number.zoom { transform: scale(1.25); }

/* ===== SIDE FADED NUMBERS (Î Î¡ÎŸÎ£Î˜Î—ÎšÎ—) ===== */
.bingoSide{
  position:fixed;
  top:50%;
  transform:translateY(-50%);
  width:180px;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:6px;
  opacity:0.25;
  pointer-events:none;
  font-weight:bold;
}
.bingoSide.left{ left:20px; }
.bingoSide.right{ right:20px; }
.bingoSide span{
  text-align:center;
  font-size:18px;
  transition:opacity 0.3s ease;
}
.bingoSide span.drawn{ opacity:1; }

/* ===== CONTROLS ===== */
.controls{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:20px;
  margin:15px auto;
  padding:20px 30px;
  background:rgba(255,255,255,0.25);
  backdrop-filter:blur(12px);
  border-radius:30px;
  box-shadow:0 8px 25px rgba(0,0,0,0.25);
}
.controls button{
  padding:14px 28px;
  font-size:22px;
  border:none;
  border-radius:50px;
  cursor:pointer;
  font-weight:bold;
  color:white;
}

/* Drawn grid */
#drawn{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
}
.ball{
  width:90px;
  height:90px;
  border-radius:50%;
  background:white;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  font-size:32px;
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
}

audio{ display:none; }
</style>
</head>

<body>

<h1>BINGO ÎšÎ›Î—Î¡Î©Î£Î—</h1>

<div id="number">â€“</div>

<!-- SIDE NUMBERS -->
<div class="bingoSide left" id="bingoLeft"></div>
<div class="bingoSide right" id="bingoRight"></div>

<div class="controls">
  <button onclick="startAuto()">â–¶ï¸ AUTO</button>
  <button onclick="stopAuto()">â¹ï¸ STOP</button>
  <button onclick="resetGame()">ğŸ”„ RESET</button>
</div>

<div id="drawn"></div>

<script>
let auto=null;
let gameOver=false;

/* ===== SIDE NUMBERS INIT ===== */
const bingoLeft=document.getElementById("bingoLeft");
const bingoRight=document.getElementById("bingoRight");

for(let i=1;i<=37;i++){
  const s=document.createElement("span");
  s.textContent=i;
  s.dataset.num=i;
  bingoLeft.appendChild(s);
}
for(let i=38;i<=75;i++){
  const s=document.createElement("span");
  s.textContent=i;
  s.dataset.num=i;
  bingoRight.appendChild(s);
}
function markSideNumber(n){
  const el=document.querySelector(`.bingoSide span[data-num="${n}"]`);
  if(el) el.classList.add("drawn");
}

/* ===== WS ===== */
const ws=new WebSocket((location.protocol==="https:"?"wss://":"ws://")+location.host);
ws.onmessage=(msg)=>{
  const data=JSON.parse(msg.data);
  if(data.type==="number"){
    show(data.number,data.drawn);
  }
  if(data.type==="reset"){
    document.getElementById("number").innerText="â€“";
    document.getElementById("drawn").innerHTML="";
    document.querySelectorAll(".bingoSide span").forEach(s=>s.classList.remove("drawn"));
  }
};

/* ===== SHOW NUMBER ===== */
function show(n,arr){
  const num=document.getElementById("number");
  num.innerText=n;
  num.classList.add("zoom");
  setTimeout(()=>num.classList.remove("zoom"),300);

  markSideNumber(n);

  const d=document.getElementById("drawn");
  d.innerHTML="";
  arr.forEach(x=>{
    const b=document.createElement("div");
    b.className="ball";
    b.innerText=x;
    d.appendChild(b);
  });
}

/* ===== CONTROLS ===== */
function startAuto(){
  if(auto) clearInterval(auto);
  auto=setInterval(()=>fetch("/api/draw"),5000);
}
function stopAuto(){
  if(auto){ clearInterval(auto); auto=null; }
}
function resetGame(){
  fetch("/api/reset",{method:"POST"});
}
</script>

</body>
</html>
